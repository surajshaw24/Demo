<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PTC - Smart Invoice System</title>
    <style>
        @page {
            size: A4  Portrait;
            margin: 0;
        }
        body {
            font-family: Arial bold, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        @media print {
            body {
                background-color: Yellow;
            }
            .action-buttons, .ai-suggestions, .save-options {
                display: none !important;
            }
        }
        .invoice-container {
            width: 290mm;
            min-height: 200mm;
            margin: 10px auto;
            background-color: Pink;
            padding: 15mm;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
            position: relative;
        }
        .header {
            text-align: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }
        .header h1 {
            margin: 0;
            color: #003366;
            font-size: 24px;
        }
        .header p {
            margin: 5px 0;
            font-size: 14px;
        }
        .company-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        .company-info div {
            width: 48%;
        }
        .consignor-consignee {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        .consignor, .consignee {
            width: 48%;
            border: 1px solid #ddd;
            padding: 10px;
            font-size: 14px;
        }
        .consignor h3, .consignee h3 {
            margin-top: 0;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            font-size: 16px;
        }
        .invoice-details {
            margin-bottom: 15px;
            font-size: 14px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
            font-size: 14px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .total-row {
            font-weight: bold;
            background-color: #f2f2f2;
        }
        .footer {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .signature {
            width: 45%;
            text-align: center;
            font-size: 14px;
        }
        .stamp-area {
            border: 1px dashed #999;
            height: 80px;
            margin-top: 10px;
        }
        .note {
            margin-top: 15px;
            font-style: italic;
            color: #666;
            font-size: 14px;
        }
        .watermark {
            position: absolute;
            opacity: 0.1;
            font-size: 120px;
            color: #003366;
            transform: rotate(-45deg);
            z-index: -1;
            left: 30%;
            top: 40%;
        }
        .copy-info {
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
            color: #003366;
            font-size: 16px;
        }
        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 0 15mm;
        }
        button {
            padding: 8px 12px;
            background-color: #003366;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }
        button:hover {
            background-color: #004080;
        }
        .ai-suggestions {
            background-color: #f8f8f8;
            padding: 10px;
            border-radius: 4px;
            margin: 0 15mm 15px;
            border-left: 4px solid #003366;
            font-size: 14px;
        }
        .ai-suggestions h4 {
            margin-top: 0;
        }
        input, select {
            padding: 6px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
            margin-bottom: 5px;
            font-size: 13px;
        }
        .item-row input {
            width: 90%;
            padding: 4px;
        }
        .save-options {
            display: none;
            background-color: #f8f8f8;
            padding: 10px;
            margin: 0 15mm 15px;
            border-radius: 4px;
            font-size: 14px;
        }
        .add-row-btn {
            text-align: center;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="action-buttons">
        <button id="aiFillBtn">AI Auto-Fill</button>
        <button id="printBtn">Print Invoice</button>
        <button id="saveBtn">Save Invoice</button>
        <button id="resetBtn">Reset All</button>
        <button id="addRowBtn">Add Row</button>
    </div>
    
    <div id="aiSuggestions" class="ai-suggestions" style="display: none;">
        <h4>AI Suggestions</h4>
        <p id="suggestionText"></p>
        <button id="applySuggestion">Apply Suggestion</button>
        <button id="ignoreSuggestion">Ignore</button>
    </div>
    
    <div class="save-options" id="saveOptions">
        <h4>Save Options</h4>
        <input type="text" id="fileName" placeholder="Enter file name">
        <select id="saveFormat">
            <option value="pdf">PDF</option>
            <option value="json">JSON</option>
            <option value="csv">CSV</option>
        </select>
        <button id="confirmSave">Save</button>
        <button id="cancelSave">Cancel</button>
    </div>
    
    <div class="invoice-container">
        <div class="watermark">PTC</div>
        
        <div class="copy-info">TRANSPORTER COPY</div>
        
        <div class="header">
            <h1>SHRI NARAYAN LOGISTICS</h1>
            <p><input type="text" id="hoAddress" value="H.O-PATLIPUTRA TRANSPORT CORPORATION, Patna, Bihar, 800002" style="width: 80%;"></p>
            <p>GST NO: <input type="text" id="gstNo" value="20ADMPA8920C1Z6" style="width: 150px;"> | B.O: <input type="text" id="boAddress" value="Ranchi" style="width: 100px;"></p>
        </div>
        
        <div class="consignor-consignee">
            <div class="consignor">
                <h3>CONSIGNOR NAME</h3>
                <p><input type="text" id="consignorName" value="ASIAN PAINTS LTD"></p>
                <p>ADDRESS (FROM): <input type="text" id="fromAddress" value="Dhanbad"></p>
                <p>CONTACT NO: <input type="text" id="consignorContact" value="7808958144"></p>
            </div>
            <div class="consignee">
                <h3>CONSIGNEE NAME</h3>
                <p><input type="text" id="consigneeName" value="RAJESH HARDWARE PLY CENTER"></p>
                <p>ADDRESS (TO): <input type="text" id="toAddress" value="Jamtara"></p>
                <p>CONTACT NO: <input type="text" id="consigneeContact"></p>
            </div>
        </div>
        
        <div class="invoice-details">
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <div><strong>C/N NO-</strong> <input type="text" id="cnNo" value="P/AS/25-26/02685" style="width: 150px;"></div>
                <div><strong>C/N DATE:</strong> <input type="date" id="cnDate" value="2025-05-20" style="width: 120px;"></div>
                <div><strong>INV. DATE:</strong> <input type="date" id="invDate" value="2025-06-04" style="width: 120px;"></div>
                <div><strong>Way Bill No.:</strong> <input type="text" id="wayBillNo" value="2193.3" style="width: 80px;"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <div><strong>Truck No:</strong> <input type="text" id="truckNo" value="JH01DU-8224" style="width: 100px;"></div>
                <div><strong>Insurance:</strong> <input type="text" id="insurance" value="0" style="width: 50px;"></div>
                <div><strong>FROM:</strong> <input type="text" id="fromCity" value="Dhanbad" style="width: 80px;"></div>
                <div><strong>TO:</strong> <input type="text" id="toCity" value="Jamtara" style="width: 80px;"></div>
            </div>
            <div style="margin-bottom: 10px;">
                <strong>Transporter:</strong> <input type="text" id="transporter" value="Asian Paints Products" style="width: 300px;">
            </div>
        </div>
        
        <table id="itemsTable">
            <thead>
                <tr>
                    <th style="width: 5%;">SL NO.</th>
                    <th style="width: 20%;">INVOICE NO</th>
                    <th style="width: 10%;">PACKAGES</th>
                    <th style="width: 15%;">WEIGHT (KG)</th>
                    <th style="width: 15%;">VALUE(Rs.)</th>
                </tr>
            </thead>
            <tbody>
                <tr class="item-row">
                    <td>1</td>
                    <td><input type="text" class="invoice-no" value="1309941891"></td>
                    <td><input type="text" class="packages" value="01"></td>
                    <td><input type="text" class="weight" value="62.02"></td>
                    <td><input type="text" class="value" value="17966"></td>
                </tr>
                <tr class="item-row">
                    <td>2</td>
                    <td><input type="text" class="invoice-no" value="1282761451"></td>
                    <td><input type="text" class="packages" value="13"></td>
                    <td><input type="text" class="weight" value="202.9"></td>
                    <td><input type="text" class="value"></td>
                </tr>
                <tr class="item-row">
                    <td>3</td>
                    <td><input type="text" class="invoice-no"></td>
                    <td><input type="text" class="packages"></td>
                    <td><input type="text" class="weight"></td>
                    <td><input type="text" class="value"></td>
                </tr>
                <tr class="item-row">
                    <td>4</td>
                    <td><input type="text" class="invoice-no"></td>
                    <td><input type="text" class="packages"></td>
                    <td><input type="text" class="weight"></td>
                    <td><input type="text" class="value"></td>
                </tr>
                <tr class="item-row">
                    <td>5</td>
                    <td><input type="text" class="invoice-no"></td>
                    <td><input type="text" class="packages"></td>
                    <td><input type="text" class="weight"></td>
                    <td><input type="text" class="value"></td>
                </tr>
                <tr class="item-row">
                    <td>6</td>
                    <td><input type="text" class="invoice-no"></td>
                    <td><input type="text" class="packages"></td>
                    <td><input type="text" class="weight"></td>
                    <td><input type="text" class="value"></td>
                </tr>
                <tr class="item-row">
                    <td>7</td>
                    <td><input type="text" class="invoice-no"></td>
                    <td><input type="text" class="packages"></td>
                    <td><input type="text" class="weight"></td>
                    <td><input type="text" class="value"></td>
                </tr>
                <tr class="item-row">
                    <td>8</td>
                    <td><input type="text" class="invoice-no"></td>
                    <td><input type="text" class="packages"></td>
                    <td><input type="text" class="weight"></td>
                    <td><input type="text" class="value"></td>
                </tr>
                <tr class="item-row">
                    <td>9</td>
                    <td><input type="text" class="invoice-no"></td>
                    <td><input type="text" class="packages"></td>
                    <td><input type="text" class="weight"></td>
                    <td><input type="text" class="value"></td>
                </tr>
                <tr class="item-row">
                    <td>10</td>
                    <td><input type="text" class="invoice-no"></td>
                    <td><input type="text" class="packages"></td>
                    <td><input type="text" class="weight" value="14"></td>
                    <td><input type="text" class="value" value="264.92"></td>
                </tr>
                <!-- Additional rows will be added here by JavaScript -->
                <tr class="total-row">
                    <td colspan="3">TOTAL</td>
                    <td id="totalWeight">264.92</td>
                    <td id="totalValue">20159.3</td>
                </tr>
            </tbody>
        </table>
        
        <div class="note">
            <p>TO BE BILLED AT <input type="text" id="billedAt" value="RANCHI" style="width: 100px;"></p>
            <p>PATLIPUTRA TRANSPORT CORPORATION</p>
            <p><input type="text" id="deliveryType" value="DOOR DELIVERY" style="width: 150px;"></p>
        </div>
        
        <div class="footer">
            <div class="signature">
                <p>Consignee Signature</p>
                <div class="stamp-area"></div>
            </div>
            <div class="signature">
                <p>CONSIGNEE RECEIPT DATE & STAMP</p>
                <div class="stamp-area"></div>
            </div>
        </div>
    </div>

    <script>
        // Initialize row counter
        let rowCounter = 10;
        
        // AI Auto-Fill Functionality
        document.getElementById('aiFillBtn').addEventListener('click', function() {
            // Simulate AI analysis and suggestions
            const suggestions = [
                "Based on previous invoices, I can auto-fill missing consignee contact as 9876543210",
                "Common value for similar shipments is ₹18,000. Would you like to apply this to empty value fields?",
                "Detected possible duplicate invoice numbers. Would you like to check?"
            ];
            
            const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
            document.getElementById('suggestionText').textContent = randomSuggestion;
            document.getElementById('aiSuggestions').style.display = 'block';
        });

        // Apply AI Suggestion
        document.getElementById('applySuggestion').addEventListener('click', function() {
            // In a real app, this would apply the specific suggestion
            // For demo, we'll just fill some common fields
            if(!document.getElementById('consigneeContact').value) {
                document.getElementById('consigneeContact').value = '9876543210';
            }
            
            // Fill empty value fields with average
            const valueInputs = document.querySelectorAll('.value');
            valueInputs.forEach(input => {
                if(!input.value) {
                    input.value = '18000';
                }
            });
            
            calculateTotals();
            document.getElementById('aiSuggestions').style.display = 'none';
        });

        // Ignore Suggestion
        document.getElementById('ignoreSuggestion').addEventListener('click', function() {
            document.getElementById('aiSuggestions').style.display = 'none';
        });

        // Print Functionality
        document.getElementById('printBtn').addEventListener('click', function() {
            window.print();
        });

        // Save Options
        document.getElementById('saveBtn').addEventListener('click', function() {
            document.getElementById('saveOptions').style.display = 'block';
        });

        // Confirm Save
        document.getElementById('confirmSave').addEventListener('click', function() {
            const fileName = document.getElementById('fileName').value || 'invoice';
            const format = document.getElementById('saveFormat').value;
            
            alert(`Invoice would be saved as ${fileName}.${format} in a real application`);
            document.getElementById('saveOptions').style.display = 'none';
        });

        // Cancel Save
        document.getElementById('cancelSave').addEventListener('click', function() {
            document.getElementById('saveOptions').style.display = 'none';
        });

        // Reset All
        document.getElementById('resetBtn').addEventListener('click', function() {
            if(confirm('Are you sure you want to reset all fields?')) {
                document.querySelectorAll('input').forEach(input => {
                    input.value = '';
                });
                
                // Reset some fields to default values
                document.getElementById('hoAddress').value = 'H.O-PATLIPUTRA TRANSPORT CORPORATION, Patna, Bihar, 800002';
                document.getElementById('gstNo').value = '20ADMPA8920C1Z6';
                document.getElementById('boAddress').value = 'Ranchi';
                document.getElementById('consignorName').value = 'ASIAN PAINTS LTD';
                document.getElementById('fromAddress').value = 'Dhanbad';
                document.getElementById('consignorContact').value = '7808958144';
                document.getElementById('billedAt').value = 'RANCHI';
                document.getElementById('deliveryType').value = 'DOOR DELIVERY';
                
                // Remove all dynamically added rows
                const rows = document.querySelectorAll('.item-row');
                for(let i = 10; i < rows.length; i++) {
                    rows[i].remove();
                }
                rowCounter = 10;
                
                calculateTotals();
            }
        });

        // Add Row Functionality
        document.getElementById('addRowBtn').addEventListener('click', function() {
            rowCounter++;
            const tbody = document.querySelector('#itemsTable tbody');
            const totalRow = document.querySelector('.total-row');
            
            const newRow = document.createElement('tr');
            newRow.className = 'item-row';
            newRow.innerHTML = `
                <td>${rowCounter}</td>
                <td><input type="text" class="invoice-no"></td>
                <td><input type="text" class="packages"></td>
                <td><input type="text" class="weight"></td>
                <td><input type="text" class="value"></td>
            `;
            
            tbody.insertBefore(newRow, totalRow);
            
            // Add event listeners to new inputs
            newRow.querySelector('.weight').addEventListener('change', calculateTotals);
            newRow.querySelector('.value').addEventListener('change', calculateTotals);
        });

        // Calculate totals when values change
        document.querySelectorAll('.weight, .value').forEach(input => {
            input.addEventListener('change', calculateTotals);
        });

        // Calculate Totals Function
        function calculateTotals() {
            let totalWeight = 0;
            let totalValue = 0;
            
            document.querySelectorAll('.item-row').forEach(row => {
                const weight = parseFloat(row.querySelector('.weight').value) || 0;
                const value = parseFloat(row.querySelector('.value').value) || 0;
                
                totalWeight += weight;
                totalValue += value;
            });
            
            document.getElementById('totalWeight').textContent = totalWeight.toFixed(2);
            document.getElementById('totalValue').textContent = totalValue.toFixed(2);
        }

        // Initialize totals
        calculateTotals();
    </script>
</body>
</html>
